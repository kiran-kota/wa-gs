"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3147],{3147:(P,c,o)=>{o.r(c),o.d(c,{SessionPageModule:()=>v});var d=o(6895),u=o(4719),i=o(9250),r=o(6069),h=o(5861),t=o(6738),g=o(5830);function m(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-fab",9),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.load())}),t.TgZ(1,"ion-fab-button",10),t._UZ(2,"ion-icon",11),t.qZA()()}}const f=[{path:"",component:(()=>{class n{constructor(e,s,l,b,S){this.modalCtrl=e,this.api=s,this.activatedRoute=l,this.route=b,this.alertController=S,this.name="",this.id="",this.loading=!0,this.interval=null,this.qr="",this.msg=""}ngOnInit(){this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.name=this.activatedRoute.snapshot.paramMap.get("name"),this.load()}backBtn(){this.route.navigateByUrl("/sheet/"+this.id)}ionViewDidLeave(){console.log("closing interval"),clearInterval(this.interval)}createInterval(){this.interval=setInterval(()=>this.api.get(`get-status/${this.id}/${this.name}`).subscribe(e=>{console.log(e,"interval res"),e.success&&"authenticated"==e.data.status&&(this.qr="",this.msg="Connected",clearInterval(this.interval),this.interval=null,console.log(this.interval,"interval"))}),5e3)}load(){this.loading=!0,this.api.get(`get-qr/${this.id}/${this.name}`).subscribe(e=>{console.log(e,"res"),this.loading=!1,e.success?(this.qr=e.data.qr,this.msg=e.message):this.msg="Please wait and refresh after 10 seconds",null==this.interval&&this.createInterval()},e=>{console.log(e,"err")})}delete(){this.loading=!0,this.api.get(`disconnect/${this.id}/${this.name}`).subscribe(e=>{console.log(e,"res"),this.loading=!1,this.backBtn()},e=>{console.log(e,"err")})}confirm(){var e=this;return(0,h.Z)(function*(){yield(yield e.alertController.create({header:"Are you sure?",subHeader:"Session will be deleted",buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"OK",role:"confirm",handler:()=>{e.delete()}}]})).present()})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.IN),t.Y36(g.s),t.Y36(r.gz),t.Y36(r.F0),t.Y36(i.Br))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-session"]],decls:16,vars:5,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","chevron-back-sharp"],["slot","end"],["slot","icon-only","name","trash-sharp"],["id","container"],[3,"src","hidden"],["vertical","bottom","horizontal","end","slot","fixed",3,"click",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["color","danger"],["name","refresh"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return s.backBtn()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6),t.qZA(),t.TgZ(7,"ion-buttons",4)(8,"ion-button",2),t.NdJ("click",function(){return s.confirm()}),t._UZ(9,"ion-icon",5),t.qZA()()()(),t.TgZ(10,"ion-content")(11,"div",6)(12,"p"),t._uU(13),t.qZA(),t._UZ(14,"img",7),t.qZA(),t.YNc(15,m,3,0,"ion-fab",8),t.qZA()),2&e&&(t.xp6(6),t.Oqu(s.name),t.xp6(7),t.Oqu(s.msg),t.xp6(1),t.Q6J("src",s.qr,t.LSH)("hidden",""==s.qr),t.xp6(1),t.Q6J("ngIf",!s.loading))},dependencies:[d.O5,i.YG,i.Sm,i.W2,i.IJ,i.W4,i.Gu,i.gu,i.wd,i.sr],styles:["ion-content[_ngcontent-%COMP%]{--background: #fafafa}"]}),n})()}];let p=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[r.Bz.forChild(f),r.Bz]}),n})(),v=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,u.u5,i.Pc,p]}),n})()}}]);